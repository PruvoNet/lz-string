{"version":3,"file":"utils.js","sources":["../../src/Uint8Array/utils.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2013 Pieroxy <pieroxy@pieroxy.net>\n *\n * SPDX-License-Identifier: MIT\n */\n\n/**\n * Converts a string to a Uint8Array, needed for saving on NodeJS, but might\n * also be useful for data transfer.\n *\n * This is binary safe rather than utf8 like TextDecoder.\n */\nexport function convertToUint8Array(data: string | null, forceEven?: boolean) {\n    if (typeof data === \"string\") {\n        // Needs a single extra digit so not an even output length\n        const isOdd = !forceEven && data.charCodeAt(data.length - 1) % 256 === 0;\n        const buf = new Uint8Array(data.length * 2 - (isOdd ? 1 : 0)); // 2 bytes per character\n\n        for (let i = 0; i < data.length; i++) {\n            const current_value = data.charCodeAt(i);\n\n            buf[i * 2] = current_value >>> 8;\n            if (!isOdd || i < data.length - 1) {\n                buf[i * 2 + 1] = current_value % 256;\n            }\n        }\n\n        return buf;\n    }\n\n    return data;\n}\n\n/**\n * Converts a Uint8Array to a string, needed for loading on NodeJS, but might\n * also be useful for data transfer.\n *\n * This is binary safe rather than utf8 like TextEncoder.\n */\nexport function convertFromUint8Array(data: Uint8Array) {\n    // There might be an odd number of digits\n    const length = Math.floor(data.byteLength / 2);\n    const arr = [];\n\n    for (let i = 0; i < length; i++) {\n        arr.push(String.fromCharCode(data[i * 2] * 256 + data[i * 2 + 1]));\n    }\n    if (data.byteLength & 1) {\n        arr.push(String.fromCharCode(data[data.byteLength - 1] * 256));\n    }\n    return arr.join(\"\");\n}\n"],"names":["convertToUint8Array","data","forceEven","isOdd","buf","i","current_value","convertFromUint8Array","length","arr"],"mappings":"AAYgB,SAAAA,EAAoBC,GAAqBC,GAAqB;AACtE,MAAA,OAAOD,KAAS,UAAU;AAEpB,UAAAE,IAAQ,CAACD,KAAaD,EAAK,WAAWA,EAAK,SAAS,CAAC,IAAI,QAAQ,GACjEG,IAAM,IAAI,WAAWH,EAAK,SAAS,KAAKE,IAAQ,IAAI,EAAE;AAE5D,aAASE,IAAI,GAAGA,IAAIJ,EAAK,QAAQI,KAAK;AAC5B,YAAAC,IAAgBL,EAAK,WAAWI,CAAC;AAEnC,MAAAD,EAAAC,IAAI,CAAC,IAAIC,MAAkB,IAC3B,CAACH,KAASE,IAAIJ,EAAK,SAAS,OAC5BG,EAAIC,IAAI,IAAI,CAAC,IAAIC,IAAgB;AAAA,IAEzC;AAEO,WAAAF;AAAA,EACX;AAEO,SAAAH;AACX;AAQO,SAASM,EAAsBN,GAAkB;AAEpD,QAAMO,IAAS,KAAK,MAAMP,EAAK,aAAa,CAAC,GACvCQ,IAAM,CAAA;AAEZ,WAASJ,IAAI,GAAGA,IAAIG,GAAQH;AACxB,IAAAI,EAAI,KAAK,OAAO,aAAaR,EAAKI,IAAI,CAAC,IAAI,MAAMJ,EAAKI,IAAI,IAAI,CAAC,CAAC,CAAC;AAEjE,SAAAJ,EAAK,aAAa,KACdQ,EAAA,KAAK,OAAO,aAAaR,EAAKA,EAAK,aAAa,CAAC,IAAI,GAAG,CAAC,GAE1DQ,EAAI,KAAK,EAAE;AACtB;"}