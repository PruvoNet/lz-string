"use strict";const _=require("fs");function y(t,e,c){if(t==null)return"";let o,r;const s={},p={};let w="",g="",h="",d=2,a=3,f=2;const u=[];let n=0,i=0,l;for(l=0;l<t.length;l+=1)if(w=t.charAt(l),Object.prototype.hasOwnProperty.call(s,w)||(s[w]=a++,p[w]=!0),g=h+w,Object.prototype.hasOwnProperty.call(s,g))h=g;else{if(Object.prototype.hasOwnProperty.call(p,h)){if(h.charCodeAt(0)<256){for(o=0;o<f;o++)n=n<<1,i==e-1?(i=0,u.push(c(n)),n=0):i++;for(r=h.charCodeAt(0),o=0;o<8;o++)n=n<<1|r&1,i==e-1?(i=0,u.push(c(n)),n=0):i++,r=r>>1}else{for(r=1,o=0;o<f;o++)n=n<<1|r,i==e-1?(i=0,u.push(c(n)),n=0):i++,r=0;for(r=h.charCodeAt(0),o=0;o<16;o++)n=n<<1|r&1,i==e-1?(i=0,u.push(c(n)),n=0):i++,r=r>>1}d--,d==0&&(d=Math.pow(2,f),f++),delete p[h]}else for(r=s[h],o=0;o<f;o++)n=n<<1|r&1,i==e-1?(i=0,u.push(c(n)),n=0):i++,r=r>>1;d--,d==0&&(d=Math.pow(2,f),f++),s[g]=a++,h=String(w)}if(h!==""){if(Object.prototype.hasOwnProperty.call(p,h)){if(h.charCodeAt(0)<256){for(o=0;o<f;o++)n=n<<1,i==e-1?(i=0,u.push(c(n)),n=0):i++;for(r=h.charCodeAt(0),o=0;o<8;o++)n=n<<1|r&1,i==e-1?(i=0,u.push(c(n)),n=0):i++,r=r>>1}else{for(r=1,o=0;o<f;o++)n=n<<1|r,i==e-1?(i=0,u.push(c(n)),n=0):i++,r=0;for(r=h.charCodeAt(0),o=0;o<16;o++)n=n<<1|r&1,i==e-1?(i=0,u.push(c(n)),n=0):i++,r=r>>1}d--,d==0&&(d=Math.pow(2,f),f++),delete p[h]}else for(r=s[h],o=0;o<f;o++)n=n<<1|r&1,i==e-1?(i=0,u.push(c(n)),n=0):i++,r=r>>1;d--,d==0&&(d=Math.pow(2,f),f++)}for(r=2,o=0;o<f;o++)n=n<<1|r&1,i==e-1?(i=0,u.push(c(n)),n=0):i++,r=r>>1;for(;;)if(n=n<<1,i==e-1){u.push(c(n));break}else i++;return u.join("")}function A(t,e,c){const o=[];let r=4,s=4,p=3,w="";const g=[];let h,d,a,f,u,n,i;const l={val:c(0),position:e,index:1};for(h=0;h<3;h+=1)o[h]=String(h);for(a=0,u=Math.pow(2,2),n=1;n!=u;)f=l.val&l.position,l.position>>=1,l.position==0&&(l.position=e,l.val=c(l.index++)),a|=(f>0?1:0)*n,n<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),n=1;n!=u;)f=l.val&l.position,l.position>>=1,l.position==0&&(l.position=e,l.val=c(l.index++)),a|=(f>0?1:0)*n,n<<=1;i=String.fromCharCode(a);break;case 1:for(a=0,u=Math.pow(2,16),n=1;n!=u;)f=l.val&l.position,l.position>>=1,l.position==0&&(l.position=e,l.val=c(l.index++)),a|=(f>0?1:0)*n,n<<=1;i=String.fromCharCode(a);break;case 2:return""}if(i===void 0)throw new Error("No character found");for(o[3]=String(i),d=String(i),g.push(String(i));;){if(l.index>t)return"";for(a=0,u=Math.pow(2,p),n=1;n!=u;)f=l.val&l.position,l.position>>=1,l.position==0&&(l.position=e,l.val=c(l.index++)),a|=(f>0?1:0)*n,n<<=1;switch(i=a){case 0:for(a=0,u=Math.pow(2,8),n=1;n!=u;)f=l.val&l.position,l.position>>=1,l.position==0&&(l.position=e,l.val=c(l.index++)),a|=(f>0?1:0)*n,n<<=1;o[s++]=String.fromCharCode(a),i=s-1,r--;break;case 1:for(a=0,u=Math.pow(2,16),n=1;n!=u;)f=l.val&l.position,l.position>>=1,l.position==0&&(l.position=e,l.val=c(l.index++)),a|=(f>0?1:0)*n,n<<=1;o[s++]=String.fromCharCode(a),i=s-1,r--;break;case 2:return g.join("")}if(r==0&&(r=Math.pow(2,p),p++),o[i])w=String(o[i]);else if(i===s)w=d+d.charAt(0);else return null;g.push(w),o[s++]=d+w.charAt(0),r--,d=w,r==0&&(r=Math.pow(2,p),p++)}}const C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function O(t){if(t==null)return"";const e=y(t,6,c=>C.charAt(c));switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}}const v={};function U(t,e){if(!v[t]){v[t]={};for(let c=0;c<t.length;c++)v[t][t.charAt(c)]=c}return v[t][e]}function j(t){return t==null?"":t==""?null:A(t.length,32,e=>U(C,t.charAt(e)))}function S(t){return t==null?"":y(t,16,e=>String.fromCharCode(e))}function B(t,e){if(t==null)return"";const c=S(t),o=Math.ceil(Math.log(65536)/Math.log(e.length));let r="";for(let s=0,p=c.length;s<p;s++){let w=c.charCodeAt(s);for(let g=o-1;g>=0;g--){const h=Math.floor(w/Math.pow(e.length,g));w=w%Math.pow(e.length,g),r+=e.charAt(h)}}return r}function M(t){return t==null?"":t==""?null:A(t.length,32768,e=>t.charCodeAt(e))}function k(t,e){if(t==null)return"";if(t==""||e.length<2)return null;const c=Math.ceil(Math.log(65536)/Math.log(e.length));if(t.length%c!=0)return null;let o="",r,s;for(let p=0,w=t.length;p<w;p=p+c){r=0;for(let g=0;g<c;g++)s=e.indexOf(t[p+g]),r=r+s*Math.pow(e.length,c-1-g);o=o+String.fromCharCode(r)}return M(o)}const T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$";function L(t){return t==null?"":y(t,6,e=>T.charAt(e))}function E(t){return t==null?"":t==""?null:(t=t.replace(/ /g,"+"),A(t.length,32,e=>U(T,t.charAt(e))))}function R(t){const e=S(t),c=new Uint8Array(e.length*2);for(let o=0,r=e.length;o<r;o++){const s=e.charCodeAt(o);c[o*2]=s>>>8,c[o*2+1]=s%256}return c}function m(t,e){if(typeof t=="string"){const c=!e&&t.charCodeAt(t.length-1)%256===0,o=new Uint8Array(t.length*2-(c?1:0));for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);o[r*2]=s>>>8,(!c||r<t.length-1)&&(o[r*2+1]=s%256)}return o}return t}function x(t){const e=Math.floor(t.byteLength/2),c=[];for(let o=0;o<e;o++)c.push(String.fromCharCode(t[o*2]*256+t[o*2+1]));return t.byteLength&1&&c.push(String.fromCharCode(t[t.byteLength-1]*256)),c.join("")}function z(t){return t==null?M(t):M(x(t))}function b(t,e){_.writeFileSync(t,typeof e=="string"?m(e):e,null)}function q(t){return x(_.readFileSync(t,null))}function D(t){return t==null?"":y(t,15,e=>String.fromCharCode(e+32))+" "}function F(t){return t==null?"":t==""?null:A(t.length,16384,e=>t.charCodeAt(e)-32)}const G={_compress:y,_decompress:A,compress:S,compressToBase64:O,compressToCustom:B,compressToEncodedURIComponent:L,compressToUint8Array:R,compressToUTF16:D,convertFromUint8Array:x,convertToUint8Array:m,decompress:M,decompressFromBase64:j,decompressFromCustom:k,decompressFromEncodedURIComponent:E,decompressFromUint8Array:z,decompressFromUTF16:F,loadBinaryFile:q,saveBinaryFile:b};module.exports=G;
//# sourceMappingURL=index.cjs.map
